{{ 'swiper.min.css' | asset_url | stylesheet_tag }}
{{ 'custom.css' | asset_url | stylesheet_tag }}

<div
  class="swiper mySwiper swiper--{{ section.settings.slide_height }}"
  data-loop="{{ section.settings.enable_looping }}"
  data-autoplay="{{ section.settings.auto_rotate }}"
  data-speed="{{ section.settings.change_slides_speed | times: 1000 }}">
  <div class="swiper-wrapper">
    {% for block in section.blocks %}
      <div class="swiper-slide">
        <div class="slide-image-wrapper{% if section.settings.image_behavior == 'ambient' %} animate-ambient{% endif %}" id="Slide-{{ section.id }}-{{ forloop.index }}">
          {% if block.settings.image %}
            {% liquid
              assign height = block.settings.image.width | divided_by: block.settings.image.aspect_ratio | round
              assign sizes = '100vw'
              assign widths = '375,550,750,1100,1500,2000,3000,3840'
              assign fetch_priority = 'auto'
              if section.index == 1
                assign fetch_priority = 'high'
              endif
            %}
            {{ block.settings.image | image_url: width: 3840 | image_tag: height: height, sizes: sizes, widths: widths, fetchpriority: fetch_priority }}
          {% else %}
            {% assign placeholder_slide = forloop.index | modulo: 2 %}
            {% if placeholder_slide == 1 %}
              {{ 'hero-apparel-2' | placeholder_svg_tag: 'placeholder-svg' }}
            {% else %}
              {{ 'hero-apparel-1' | placeholder_svg_tag: 'placeholder-svg' }}
            {% endif %}
          {% endif %}

          <!-- Overlay per slide -->
          <span class="slide-overlay" style="--overlay-opacity: {{ block.settings.image_overlay_opacity | divided_by: 100.0 }};"></span>
        </div>

        {% if block.settings.show_text_box != false %}
          <div class="slide-text-wrapper text-{{ block.settings.text_position }} text-align-{{ block.settings.text_alignment }} text-align-mobile-{{ block.settings.text_alignment_mobile }}">
            {% if block.settings.heading != blank %}
              <h2 class="slide-heading {{ block.settings.heading_size }}">
                {{ block.settings.heading }}
              </h2>
            {% endif %}
            {% if block.settings.subheading != blank %}
              <div class="slide-subheading rte">
                <p>{{ block.settings.subheading }}</p>
              </div>
            {% endif %}
            {% if block.settings.button_label != blank %}
              <div class="slide-button">
                <a
                  {% if block.settings.link %}
                  href="{{ block.settings.link }}"
                  {% else %}
                  role="link"
                  aria-disabled="true"
                  {% endif %}
                  class="button {% if block.settings.button_style_secondary %}button--secondary{% else %}button--primary{% endif %}">
                  {{ block.settings.button_label }}
                </a>
              </div>
            {% endif %}
          </div>
        {% endif %}
      </div>
    {% endfor %}
  </div>

  {% if section.settings.show_nav_button %}
    <div class="swiper-button-next"></div>
    <div class="swiper-button-prev"></div>
  {% endif %}
  <div class="swiper-pagination"></div>
</div>

<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
{{ 'swiper-slider.js' | asset_url | script_tag }}


{% schema %}
  {
    "name": "Swiper Slideshow",
    "tag": "section",
    "class": "section",
    "disabled_on": {
      "groups": ["header", "footer"]
    },
    "settings": [
      {
        "type": "select",
        "id": "layout",
        "options": [
          {
            "value": "full_bleed",
            "label": "Full Bleed"
          }, {
            "value": "grid",
            "label": "Grid"
          }
        ],
        "label": "Layout",
        "default": "full_bleed"
      },
      {
        "type": "checkbox",
        "id": "show_nav_button",
        "label": "Show navigation arrows",
        "default": true
      },
      {
        "type": "select",
        "id": "slide_height",
        "options": [
          {
            "value": "adapt_image",
            "label": "Adapt Image"
          }, {
            "value": "small",
            "label": "Small"
          }, {
            "value": "medium",
            "label": "Medium"
          }, {
            "value": "large",
            "label": "Large"
          }
        ],
        "label": "Slide Height",
        "default": "medium"
      },
      {
        "type": "select",
        "id": "slider_visual",
        "options": [
          {
            "value": "dots",
            "label": "Dots navigation"
          }, {
            "value": "counter",
            "label": "Slide counter"
          }, {
            "value": "numbers",
            "label": "Numbered pagination"
          }
        ],
        "default": "counter",
        "label": "Navigation style"
      }, {
        "type": "checkbox",
        "id": "auto_rotate",
        "label": "Auto Rotate",
        "default": true
      }, {
        "type": "checkbox",
        "id": "enable_looping",
        "label": "Enable looping",
        "default": true
      }, {
        "type": "range",
        "id": "change_slides_speed",
        "min": 3,
        "max": 9,
        "step": 1,
        "unit": "s",
        "label": "Autoplay speed",
        "default": 5
      }, {
        "type": "select",
        "id": "image_behavior",
        "options": [
          {
            "value": "none",
            "label": "None"
          }, {
            "value": "ambient",
            "label": "Ambient animation"
          }
        ],
        "default": "none",
        "label": "Image animation effect"
      }, {
        "type": "header",
        "content": "Mobile settings"
      }, {
        "type": "checkbox",
        "id": "show_text_below",
        "label": "Show text below image on mobile",
        "default": true
      }, {
        "type": "header",
        "content": "Accessibility"
      }, {
        "type": "text",
        "id": "accessibility_label",
        "label": "Screen reader description",
        "info": "Describe this slideshow for visually impaired users",
        "default": "Image slideshow"
      }
    ],
    "blocks": [
      {
        "type": "slide",
        "name": "Slide",
        "limit": 5,
        "settings": [
          {
            "type": "image_picker",
            "id": "image",
            "label": "Slide image"
          },
          {
            "type": "range",
            "id": "image_overlay_opacity",
            "min": 0,
            "max": 100,
            "step": 10,
            "unit": "%",
            "label": "Image overlay opacity",
            "default": 0,
            "info": "Increase to improve text readability on bright images"
          },
          {
            "type": "header",
            "content": "Text content"
          },
          {
            "type": "inline_richtext",
            "id": "heading",
            "default": "Slide heading",
            "label": "Heading"
          }, {
            "type": "select",
            "id": "heading_size",
            "options": [
              {
                "value": "h2",
                "label": "Small"
              },
              {
                "value": "h1",
                "label": "Medium"
              },
              {
                "value": "h0",
                "label": "Large"
              },
              {
                "value": "hxl",
                "label": "Extra large"
              }, {
                "value": "hxxl",
                "label": "Extra extra large"
              }
            ],
            "default": "h1",
            "label": "Heading size"
          }, {
            "type": "inline_richtext",
            "id": "subheading",
            "default": "Slide subheading text",
            "label": "Subheading"
          }, {
            "type": "header",
            "content": "Button"
          }, {
            "type": "text",
            "id": "button_label",
            "default": "Shop now",
            "label": "Button label",
            "info": "Leave empty to hide the button"
          }, {
            "type": "url",
            "id": "link",
            "label": "Slide link"
          }, {
            "type": "checkbox",
            "id": "button_style_secondary",
            "label": "Use outline button style",
            "default": false
          }, {
            "type": "header",
            "content": "Layout options"
          }, {
            "type": "checkbox",
            "id": "show_text_box",
            "label": "Show text content",
            "default": true,
            "info": "Uncheck to hide heading, subheading, and button"
          }, {
            "type": "select",
            "id": "text_position",
            "options": [
              {
                "value": "top-left",
                "label": "Top Left"
              },
              {
                "value": "top-center",
                "label": "Top Center"
              },
              {
                "value": "top-right",
                "label": "Top Right"
              },
              {
                "value": "middle-left",
                "label": "Middle Left"
              }, {
                "value": "middle-center",
                "label": "Middle Center"
              }, {
                "value": "middle-right",
                "label": "Middle Right"
              }, {
                "value": "bottom-left",
                "label": "Bottom Left"
              }, {
                "value": "bottom-center",
                "label": "Bottom Center"
              }, {
                "value": "bottom-right",
                "label": "Bottom Right"
              }
            ],
            "default": "middle-center",
            "label": "Text position"
          }, {
            "type": "select",
            "id": "text_alignment",
            "options": [
              {
                "value": "left",
                "label": "Left aligned"
              }, {
                "value": "center",
                "label": "Center aligned"
              }, {
                "value": "right",
                "label": "Right aligned"
              }
            ],
            "default": "center",
            "label": "Text alignment"
          }, {
            "type": "select",
            "id": "text_alignment_mobile",
            "options": [
              {
                "value": "left",
                "label": "Left"
              }, {
                "value": "center",
                "label": "Center"
              }, {
                "value": "right",
                "label": "Right"
              }
            ],
            "default": "center",
            "label": "Text alignment (mobile)"
          }, {
            "type": "color_scheme",
            "id": "color_scheme",
            "label": "Color scheme",
            "default": "scheme-1"
          }
        ]
      }
    ],
    "presets": [
      {
        "name": "Swiper Slideshow",
        "blocks": [
          {
            "type": "slide"
          }, {
            "type": "slide"
          }
        ]
      }
    ]
  }
{% endschema %}